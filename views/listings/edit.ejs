<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/style.css" />
    <title>Edit Form</title>
  </head>
  <style>
    a{
      text-decoration: none;
    }
  </style>
  <body>
    <% layout('/layouts/boilerplate.ejs') -%>
    <div class="container">
      <div class="row mt-3 mb-3">
        <div class="col-md-6 col-lg-7 col-sm-8 offset-2">
          <h1>Edit The Details:</h1>
          <form action="/listings/edit/<%= list._id %>" method="post" novalidate class="needs-validation" enctype="multipart/form-data">
            <div class="mb-2">
              <label for="title" class="form-label">Title:</label>
              <input
                type="text"
                name="listing[title]"
                id="title"
                value="<%= list.title %>"
                class="form-control"
                required
              />
              <div class="valid-feedback">
                Looks good!
              </div>
              <div class="invalid-feedback">
                Title is required
              </div>
            </div>
            <div class="mb-2">
              <label for="description" class="form-label">Description:</label>
              <textarea
                type="text"
                name="listing[description]"
                id="description"
                class="form-control"
                required
              /><%= list.description %></textarea>
              <div class="invalid-feedback">
                Description is required
              </div>
            </div>
            <div class="mb-2">
              <img src="<%= list.image.url %>" class="edit-img-tag">
            </div>
            <div class="mb-2">
              <label for="image" class="form-label">Image URL:</label>
              <input
                type="file"
                name="listing[image]"
                id="image"
                class="form-control"
                
              />
              <div class="invalid-feedback">
                Image URL is required
              </div>
            </div>
            <div class="mb-2">
              <label for="price" class="form-label">Price:</label>
              <input
                type="text"
                name="listing[price]"
                id="price"
                value="<%= list.price %>"
                class="form-control"
                required
              />
              <div class="invalid-feedback">
                Price is required
              </div>
            </div>
            <div class="mb-2">
              <label for="country" class="form-label">Country:</label>
              <input
                type="text"
                name="listing[country]"
                id="country"
                value="<%= list.country %>"
                class="form-control"
                required
              />
              <div class="invalid-feedback">
                Country is required
              </div>
            </div>
            <div class="mb-2">
              <label for="location" class="form-label">Location:</label>
              <input
                type="text"
                name="listing[location]"
                id="location"
                value="<%= list.location %>"
                class="form-control"
                required
              />
              <div class="invalid-feedback">
                Location is required
              </div>
            </div>
            <div class="mb-2">
              <label for="category" class="form-label">Category:</label>
              <select name="listing[category]" id="category" class="form-control" required>
                <option value="" disabled>Select a category</option>
                <option value="Amazing Views" <%= list.category === "Amazing Views" ? "selected" : "" %>>Amazing Views</option>
                <option value="Farms" <%= list.category === "Farms" ? "selected" : "" %>>Farms</option>
                <option value="Rooms" <%= list.category === "Rooms" ? "selected" : "" %>>Rooms</option>
                <option value="Arctic" <%= list.category === "Arctic" ? "selected" : "" %>>Arctic</option>
                <option value="Top Cities" <%= list.category === "Top Cities" ? "selected" : "" %>>Top Cities</option>
                <option value="Amazing Pools" <%= list.category === "Amazing Pools" ? "selected" : "" %>>Amazing Pools</option>
                <option value="Castles" <%= list.category === "Castles" ? "selected" : "" %>>Castles</option>
                <option value="Bed & Breakfasts" <%= list.category === "Bed & Breakfasts" ? "selected" : "" %>>Bed & Breakfasts</option>
                <option value="Mountain Haven" <%= list.category === "Mountain Haven" ? "selected" : "" %>>Mountain Haven</option>
                <option value="Vista Mansions" <%= list.category === "Vista Mansions" ? "selected" : "" %>>Vista Mansions</option>
              </select>
              <div class="invalid-feedback">
                Category is required
              </div>
            </div>

            <button type="submit" class="btn btn-primary edit-btn">
              Submit
            </button>
          </form>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
